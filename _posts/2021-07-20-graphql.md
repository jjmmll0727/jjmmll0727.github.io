---
title: "graphql ???"
excerpt: "what is graphql"
categories: "research"
---

<style>
code {
  font-family: Consolas,"courier new";
  padding: 2px;
  font-size: 105%;
}
</style>


<div style = "font-size: 28px; line-height: 25px;">
<center><strong>graphql</strong></center><br><br>
</div>

<div style = "font-size: 15px; line-height: 25px; text-align: left">
<strong>graphql?</strong> <br><br>
처음 보면 sql과 비슷하여 데이터베이스와 관련된 언어라고 생각할 수 있지만, 방향이 다르다.<br><br>
데이터 질의어는 물론이고, 서버 api를 구축하는 하나의 런타임으로 볼 수 있는데, rest api와 비슷하게 데이터를 주고 받을 수 있는 구조이다. <br><br>
soap -> rest -> graphql 이렇게 발전해오고 있다. <br>
그렇다면 rest에 익숙한 개발자들이 처음에 이해하기 살짝은 까다로운 graphql의 구조에 대해서 알아보자.
</div><br><br><br>

<div style = "font-size: 15px; line-height: 25px; text-align: left">
<strong>graphql 구조</strong><br><br>
graphql은 기본적으로 schema + resolver 로 구성된다. <br><br>
<strong>schema</strong><br>
<ul>
<li>schema는 변수와 함수를 정의한다.</li>
<li>java에서의 interface 역할(내 생각)</li>
<li>req.body / req.params 에서 사용되는 데이터를 미리 정의한다.</li>
</ul>
<br><br>
<strong>resolver</strong><br>
<ul>
<li>reslover는 실제로 함수를 실행한다.</li>
<li>controller 역할</li>
</ul>
<br><br>
<center><img src = "\assets\images\graphql.png"  border=0 width = "600" height = "400"></center><br><br>
위와 같이 rest api는 매번 호출을 해야하는 대신, graphql은 한번의 호출로 처리가 가능하다.<br>
</div>
<br><br>

<div style = "font-size: 15px; line-height: 25px; text-align: left">
그럼 이제 schema를 한번 짜보자.<br><br>
<center><img src = "\assets\images\schema.png"  border=0 width = "600" height = "400"></center><br><br>
schema는 client에서 server에 어떻게 data를 요청할지 정의한 파일이다. 그렇기 때문에 반드시 schema에 정의된 형태로 서버에 요청해야 한다. <br>
마치 req.body와 비슷한 느낌이다. <br><br>
기본적으로 <code>type Query</code> 와 <code>type Mutation</code> 은 디폴트로 꼭 필요한 구성요소인 듯 하다. <br><br>
Query는 read 형식이고, Mutation은 create, update, delete 형식으로 주로 쓰인다고 한다. <br><br>
<ul>
<li>타입 변수 뒤에 붙는 ! 는 반드시 있어야 하는 존재를 뜻한다. 즉, id, name, age는 반드시 입력되어야 하는 데이터, User!는 반드시 User 타입의 데이터를 반환해야 한다는 뜻이다.</li>
</ul>
</div>
<br><br>

<div style = "font-size: 15px; line-height: 25px; text-align: left">
이제 resolver를 보자.<br><br>
<center><img src = "\assets\images\resolver.png"  border=0 width = "600" height = "400"></center><br><br>
resolver는 schema에서 정의한 함수 및 변수를 구현한다.<br>
showUser는 매개변수 없이 모든 user를 보여주는 함수이고, addUser는 새로 저장할 user의 정보를 매개변수로 통해 새로운 user를 저장하는 함수이다. <br><br>
<center><img src = "\assets\images\adduser.png"  border=0 width = "600" height = "400"></center><br><br><br><br>


<div style = "font-size: 15px; line-height: 25px; text-align: left">
<strong>mutation type</strong><br><br>
</div>
<div style = "font-size: 15px; line-height: 25px; text-align: left">
1. scalar type<br><br>

```javascript
{
    user {
        name
    }
}
```
여기서 name 필드가 스칼라 타입이라고 할 수 있다. 이렇게 쿼리의 끝을 가리키는 필드를 스칼라 타입이라고 한다. 
<br><br>
2. enums tyle
<br><br>
3. list&non-null tyle
<br><br>
4. interface tyle
<br><br>
5. input tyle
<br><br>



</div>
